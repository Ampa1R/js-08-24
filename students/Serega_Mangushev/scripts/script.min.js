"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _createClass(i,e,t){return e&&_defineProperties(i.prototype,e),t&&_defineProperties(i,t),i}function getSum(i,t){return i.reduce(function(i,e){return i+e[t]},0)}var xhr=new XMLHttpRequest,root="https://raw.githubusercontent.com/Binatik/js-08-24/master/students/Serega_Mangushev/backend/Server";function promisifiedXHR(t,n,s){return new Promise(function(i,e){xhr.onreadystatechange=function(){4===xhr.readyState&&i(JSON.parse(xhr.responseText))},xhr.open(t,"".concat(n+s),!0),xhr.send()})}var ProductСard=function(){function e(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.id=i.id,this.count=i.count,this.image=i.image,this.name=i.name,this.price=i.price}return _createClass(e,[{key:"getComponent",value:function(i){return i}}]),e}(),Goods=function(){function i(){_classCallCheck(this,i),this.getVariables(),this.getGoods()}return _createClass(i,[{key:"getVariables",value:function(){this.products=document.querySelector(".shop__list"),this.maxNumPrice=document.querySelector(".shop__max-price"),this.sum=0,this.goods=[]}},{key:"getGoods",value:function(){var e=this;promisifiedXHR("GET",root,"/goods.json").then(function(i){e.goods=i,e.sum=getSum(e.goods,"price"),e.maxNumPrice.innerHTML="Общая цена товаров на сумму: ".concat(e.sum," Руб"),e.render()})}},{key:"render",value:function(){var i=this.goods.map(function(i){var e=new ProductСard(i);return e.getComponent([' <div class="shop__product product">\n                <img class="product__img" src="'.concat(e.root,'" alt="Черное">\n                <div class="product__group">\n                    <p class="product-description">').concat(e.title,'</p>  \n                    <span class="product__price">').concat(e.price,' Р</span> \n                    <button class="product__btn btn">Заказать</button>\n                </div>\n            </div>')])}).join("");this.products.innerHTML=i}}]),i}(),goods=new Goods,Hamburger=function(){function i(){_classCallCheck(this,i),this.type=[{max:{id:1,description:"Большой гамбургер ",price:100,kalloriynostyu:40},min:{id:2,description:"Маленький гамбургер ",price:50,kalloriynostyu:20}}],this.filling=[{cheese:{id:1,description:"С сыром ",price:10,kalloriynostyu:20},salad:{id:2,description:"С салатом ",price:10,kalloriynostyu:20},potato:{id:3,description:"С картошкой ",price:15,kalloriynostyu:10},seasoning:{id:4,description:"Заправить приправой ",price:15,kalloriynostyu:0},mayonnaise:{id:5,description:"Заправить майонезом ",price:20,kalloriynostyu:5}}],this.sum=0,this.sum=goods.getSumProduct(Object.values(this.type[0],"price")),console.log(this.sum),this.getChoice("2","да")}return _createClass(i,[{key:"getChoice",value:function(i,e){var t=1<arguments.length&&void 0!==e&&e;"1"===i&&(i=this.type[0].max.id),"2"===i&&(i=this.type[0].min.id),this.whatGetBurger(i,t)}},{key:"whatGetBurger",value:function(i,e){var t=1<arguments.length&&void 0!==e&&e;if(i===this.type[0].max.id)this.price=this.type[0].max.price;else{if(i!==this.type[0].min.id)throw new Error("Гамбургер не был выбран");this.price=this.type[0].min.price}this.thereIsfilling(i,t)}},{key:"thereIsfilling",value:function(i,e){!1!==(1<arguments.length&&void 0!==e&&e)?this.checkGetFilling(i,1):this.checkWhichBurger(i)}},{key:"checkGetFilling",value:function(i,e){1===e?(e=this.filling[0].cheese.id,this.price+=this.filling[0].cheese.price):2===e?(e=this.filling[0].salad.id,this.price+=this.filling[0].salad.price):3===e?(e=this.filling[0].potato.id,this.price+=this.filling[0].potato.price):4===e?(e=this.filling[0].seasoning.id,this.price+=this.filling[0].seasoning.price):5===e&&(e=this.filling[0].mayonnaise.id,this.price+=this.filling[0].mayonnaise.price),this.checkWhichBurger(i)}},{key:"checkWhichBurger",value:function(i){i===this.type[0].max.id&&console.log("Вы заказали ".concat(this.type[0].max.description," по цене ").concat(this.price)),i===this.type[0].min.id&&console.log("Вы заказали ".concat(this.type[0].min.description," по цене ").concat(this.price))}}]),i}(),hamburger=new Hamburger;